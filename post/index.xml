<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on posts</title><link>http://seiji.github.io/post/</link><description>Recent content in Posts on posts</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 03 Dec 2019 00:38:56 +0900</lastBuildDate><atom:link href="http://seiji.github.io/post/index.xml" rel="self" type="application/rss+xml"/><item><title>Retrieving ECS-Optimized-AMI from ssm using terraform</title><link>http://seiji.github.io/post/2019-12-03-terraform-ami-from-ssm/</link><pubDate>Tue, 03 Dec 2019 00:38:56 +0900</pubDate><guid>http://seiji.github.io/post/2019-12-03-terraform-ami-from-ssm/</guid><description>We can use a datasource of aws_ami to retrieve image id.
Now AWS SSM Parameter Store allows for querying the latest Amazon Linux AMI. Therefore I try more simpler way.
terraform versions $ terraform -v Terraform v0.12.16 + provider.aws v2.40.0 Create a module data aws_ssm_parameter this { name = &amp;#34;/aws/service/ecs/optimized-ami/${join(&amp;#34;/&amp;#34;, compact([var.os, var.architecture]))}/recommended&amp;#34; } variable os { default = &amp;#34;amazon-linux-2&amp;#34; } variable architecture { default = &amp;#34;&amp;#34; } output value { value = jsondecode(data.</description></item><item><title>Move multiple items in terraform states</title><link>http://seiji.github.io/post/2019-12-01-terraform-mv-items-in-state/</link><pubDate>Sun, 01 Dec 2019 00:50:02 +0900</pubDate><guid>http://seiji.github.io/post/2019-12-01-terraform-mv-items-in-state/</guid><description>Some of terraform state commands can be used in case that modify the terraform state.
We use terraform state mv command to move items or rename items in that state, enabling efficient refactoring.
terraform versions $ terraform -v Terraform v0.12.16 + provider.aws v2.40.0 All resources within a terraform state. $ terraform state list module.cloud_trails.data.aws_caller_identity.this module.cloud_trails.aws_cloudtrail.this module.cloud_trails.aws_s3_bucket.this module.cloud_trails.aws_s3_bucket_policy.this module.guard_duty.aws_guardduty_detector.this Example: Rename module.cloud_trails.* to module.cloudtrail.* $ terraform state mv -dry-run &amp;#39;module.cloud_trails&amp;#39; &amp;#39;module.</description></item></channel></rss>